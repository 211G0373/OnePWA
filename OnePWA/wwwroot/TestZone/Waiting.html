<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>Esperando</h1>


    <ul id="playerlist">
        <li>Jugador 1</li>
    </ul>



    <button id="start">start</button>
    <button id="leave">abandonar</button>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        const token = localStorage.getItem("jwtToken"); // o tu token JWT directamente

        //const connection = new signalR.HubConnectionBuilder()
        //    .withUrl("https://localhost:44355/hubs/Signalr", {
        //        accessTokenFactory: () => token
        //    })
        //    .configureLogging(signalR.LogLevel.Information)
        //    .build();


        const connection = new signalR.HubConnectionBuilder()
            .withUrl("https://localhost:44355/hubs/Signalr?access_token=" + token)
            .configureLogging(signalR.LogLevel.Information)
            .build();

        connection.start()
            .then(() => {
                console.log("✅ Conectado correctamente al servidor SignalR");
                document.body.innerHTML += "<p>✅ Conexión establecida</p>";
            })
            .catch(err => {
                console.error("❌ Error de conexión:", err);
                document.body.innerHTML += "<p>❌ Error de conexión: " + err + "</p>";
            });


        connection.on("PlayerJoined", (player) => {
         
        });
       
    </script>


</body>
</html>