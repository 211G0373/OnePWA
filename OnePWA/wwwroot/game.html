<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ONE - Game</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body class="game-page">

    <!-- HEADER: Logo ONE y botón salir -->
    <header class="game-header">
        <div class="game-logo">
            <img src="Assets/ONELogoText.png" alt="ONE" />
        </div>
    </header>

    <button class="logout-button" type="button" aria-label="Salir de la partida" onclick="openModal()">
        <img src="Assets/svgs&icons/logOut.svg" alt="Salir" />
    </button>

    <!-- MESA PRINCIPAL -->
    <main class="game-table" aria-label="Mesa de juego ONE">
        <!-- Slots de jugadores alrededor de la mesa (máx 8) -->
        <!-- Arriba izquierda -->
        <section class="player-slot slot-top-left" aria-label="Jugador Patricia">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">5</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/2.jpg" alt="Patricia" />
            </div>
            <span class="player-name">Patricia</span>
            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>

        </section>

        <!-- Arriba centro -->
        <section class="player-slot slot-top-center" aria-label="Jugador Mirton">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">4</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/3.jpg" alt="Mirton" />
            </div>
            <span class="player-name">Mirton</span>
            <span class="host-badge-table">HOST</span>
            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Arriba derecha -->
        <section class="player-slot slot-top-right" aria-label="Jugador Pedro">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">3</span>
            </div>
            <div class="player-avatar current-turn">
                <img src="Assets/avatars/4.jpg" alt="Pedro" />
            </div>
            <span class="player-name">Pedro</span>
            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Mitad izquierda -->
        <section class="player-slot slot-middle-left" aria-label="Jugador Teo">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">3</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/1.jpg" alt="Teo" />
            </div>
            <span class="player-name">Teo</span>
            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Mitad derecha -->
        <section class="player-slot slot-middle-right" aria-label="Jugador Lali">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">4</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/5.jpg" alt="Lali" />
            </div>
            <span class="player-name">Lali</span>
            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Abajo izquierda -->
        <section class="player-slot slot-bottom-left" aria-label="Jugador Ikerto">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">9</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/6.jpg" alt="Ikerto" />
            </div>
            <span class="player-name">Ikerto</span>

            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Abajo derecha -->
        <section class="player-slot slot-bottom-right" aria-label="Jugador Veta">
            <div class="player-count-pill">
                <img class="mini-card-back" src="Assets/Cards/Wild/card-backwards.png" alt="Cartas" />
                <span class="player-cards-count">6</span>
            </div>
            <div class="player-avatar">
                <img src="Assets/avatars/7.jpg" alt="Veta" />
            </div>
            <span class="player-name">Veta</span>

            <div class="player-timer">
                <div class="timer-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="timer-bar-container">
                    <div class="timer-bar"></div>
                </div>
            </div>
        </section>

        <!-- Zona central con mazo, descartes y carta actual -->
        <section class="table-center" aria-label="Zona central de cartas">
            <!-- Mazo para robar -->
            <div class="draw-pile">
                <img class="card-base" src="Assets/Cards/Wild/card-backwards.png" alt="Mazo para robar" />
                <span class="draw-count">80</span>
            </div>

            <!-- Pila de descartes (stack) -->
            <!--<div class="discard-pile">
                <div class="stacked-cards">
                    <img class="card stacked-card stacked-1" src="Assets/Cards/Normal/Green/card0=green.png" alt="Carta verde" />
                    <img class="card stacked-card stacked-2" src="Assets/Cards/Normal/Blue/card0=blue.png" alt="Carta azul" />
                    <img class="card stacked-card top-card" src="Assets/Cards/Normal/Green/card0=green.png" alt="Carta verde 3" />
                </div>
            </div>-->
            <!-- Carta actual grande -->
            <div class="current-card">
                <img class="card current" src="Assets/Cards/Number Cards/Red/card0=red.png" alt="Carta roja actual" />
            </div>

            <!-- Indicador de turno central -->
            <div class="turn-indicator" aria-hidden="true">
                <span class="turn-label">Turno de Pedro</span>
            </div>
        </section>

        <!-- Mano del jugador principal -->
        <section class="player-hand" aria-label="Tus cartas">
            <div class="hand-card hand-card-1">
                <img src="Assets/Cards/Number Cards/Yellow/card0=yellow.png" alt="Carta amarilla" />
            </div>
            <div class="hand-card hand-card-2">
                <img src="Assets/Cards/Number Cards/Purple/card0=blue.png" alt="Carta azul" />
            </div>
            <div class="hand-card hand-card-3">
                <img src="Assets/Cards/Number Cards/Green/card0=green.png" alt="Carta verde" />
            </div>
            <div class="hand-card hand-card-4">
                <img src="Assets/Cards/Number Cards/Red/card0=red.png" alt="Carta roja" />
            </div>
            <div class="hand-card hand-card-5">
                <img src="Assets/Cards/Wild/wild-colors.png" alt="Carta comodín" />
            </div>
            <div class="hand-card hand-card-6">
                <img src="Assets/Cards/Number Cards/Yellow/card0=yellow.png" alt="Carta amarilla" />
            </div>
            <div class="hand-card hand-card-7">
                <img src="Assets/Cards/Number Cards/Red/card0=red.png" alt="Carta roja" />
            </div>
        </section>
    </main>

    <!-- Botón ONE para cuando quede una carta -->
    <button class="one-button" type="button">
        <span class="one-icon">
            <img src="Assets/svgs&icons/oneHand.svg" alt="ONE" />
        </span>
        <span class="one-text">¡ONE!</span>
    </button>

    <!-- Botones temporales para probar modal (eliminar después) -->
    <div style="position: fixed; top: 100px; left: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 9999;">
        <button onclick="testEndgameModal('win')" style="padding: 10px 16px; background: #4D40E3; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
            Ver Ganar
        </button>
        <button onclick="testEndgameModal('lose')" style="padding: 10px 16px; background: #ED2428; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
            Ver Perder
        </button>
    </div>


    <!-- Modal Overlay -->
    <div class="modal-overlay" id="logoutModal" onclick="closeModalOnOverlay(event)">
        <div class="generic-modal">
            <button class="close-button" onclick="closeModal()">
                <svg viewBox="0 0 24 24">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="generic-modal-content">
                <h2>¿Está seguro de abandonar el juego?</h2>
                <p class="modal-description">No podrá volver a esta partida</p>

                <div class="modal-buttons">
                    <button class="btn btn-cancel" onclick="closeModal()">
                        Cancelar
                    </button>
                    <button class="btn btn-confirm" onclick="confirmLogout()">
                        Sí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón para probar modal de comodín -->
    <button class="color-picker-trigger" type="button" onclick="openColorPickerModal()">
        Elegir color
    </button>

    <!-- Modal selección de color para comodín -->
    <div class="modal-overlay" id="colorPickerModal" aria-hidden="true">
        <div class="generic-modal color-picker-card">
            <button class="close-button color-picker-close" type="button" aria-label="Cerrar selección" onclick="closeColorPickerModal()">
                <svg viewBox="0 0 24 24">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="color-picker-header">
                <h2>Elige un color</h2>
                <p class="modal-description">Selecciona el color para tu comodín</p>
            </div>

            <div class="color-options">
                <button class="color-option color-red" aria-label="Rojo" onclick="closeColorPickerModal()">
                    <span>Rojo</span>
                </button>
                <button class="color-option color-blue" aria-label="Azul" onclick="closeColorPickerModal()">
                    <span>Azul</span>
                </button>
                <button class="color-option color-green" aria-label="Verde" onclick="closeColorPickerModal()">
                    <span>Verde</span>
                </button>
                <button class="color-option color-yellow" aria-label="Amarillo" onclick="closeColorPickerModal()">
                    <span>Amarillo</span>
                </button>
            </div>

            <div class="color-picker-footer">
                <div class="color-hint">Tap para aplicar • Animación suave</div>
            </div>
        </div>
    </div>

    <!-- Modal de resultado de partida endgame-overlay -->
    <div class="modal-overlay " id="endgameModal" aria-hidden="true">
        <div class="generic-modal endgame-card">
            <button class="close-button endgame-close" type="button" aria-label="Cerrar resultado" onclick="closeEndgameModal()">
                <svg viewBox="0 0 24 24">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="endgame-header">
                <h2 class="endgame-title" id="endgameTitle">¡Ganaste!</h2>
                <div class="endgame-hero">
                    <div class="endgame-hero-avatar">
                        <img id="endgameHeroAvatar" src="Assets/avatars/4.jpg" alt="Avatar del jugador destacado" />
                        <!--<span class="endgame-hero-badge" id="endgameBadge">★</span>-->
                        <img src="Assets/svgs&icons/trophy.png" class="endgame-hero-badge" id="endgameBadge"></img>
                    </div>
                    <p class="endgame-hero-name" id="endgameHeroName">Pato</p>
                    <p class="endgame-hero-place" id="endgameHeroPlace">1º lugar</p>
                </div>
            </div>

            <div class="endgame-standings" id="endgameStandings">
                <div class="endgame-row">
                    <div class="endgame-row-left">
                        <span class="endgame-position">1</span>
                        <img class="endgame-row-avatar" src="Assets/avatars/4.jpg" alt="Pato" />
                        <span class="endgame-row-name">Pato</span>
                    </div>
                    <span class="endgame-row-cards">Sin cartas</span>
                </div>
                <div class="endgame-row">
                    <div class="endgame-row-left">
                        <span class="endgame-position">2</span>
                        <img class="endgame-row-avatar" src="Assets/avatars/1.jpg" alt="Teo" />
                        <span class="endgame-row-name">Teo</span>
                    </div>
                    <span class="endgame-row-cards">Con 2 cartas</span>
                </div>
                <div class="endgame-row">
                    <div class="endgame-row-left">
                        <span class="endgame-position">3</span>
                        <img class="endgame-row-avatar" src="Assets/avatars/5.jpg" alt="Lali" />
                        <span class="endgame-row-name">Lali</span>
                    </div>
                    <span class="endgame-row-cards">Con 3 cartas</span>
                </div>
            </div>

            <div class="endgame-actions profile-actions">
                <button type="button" class="login-button profile-secondary-btn" onclick="closeEndgameModal()">Salir</button>
                <button type="button" class="login-button profile-primary-btn" onclick="playAgainFromModal()">Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
